# _Setup_ do projeto de testes com Cypress

Nesta aula, vamos clonar o projeto, al√©m de instalar e configurar o [Cypress](https://cypress.io).

## Clonando o projeto

1. Acesse a URL https://github.com/wlsf82/cypress-intermediario-v2
2. Clique no bot√£o _Clone_
3. Escolha uma das op√ß√µes (_Clone with SSH_ ou _Clone with HTTPS_) e ent√£o clique no bot√£o _Copy URL_ ao lado do campo da op√ß√£o escolhida

> üë®‚Äçüè´ Eu dou prefer√™ncia ao clone via SSH, pois considero mais pr√°tico.
>
> Para detalhes sobre como criar e configurar uma chave SSH no GitHub, leia a [documenta√ß√£o oficial](https://docs.github.com/en/authentication/connecting-to-github-with-ssh/about-ssh).

4. No terminal de linha de comando, no diret√≥rio onde voc√™ armazena seus projetos de software, digite `git clone [URL copiada no passo anteior]` e pressione ENTER
5. Por fim, acesse o diret√≥rio do projeto rec√©m clonado (`cd cypress-intermediario-v2/`).

## Instalando o Cypress e outras _libs_

No terminal de linha de comando, na raiz do projeto, execute o comando `npm i @faker-js/faker@7.6.0 cypress@12.0.2 cypress-plugin-api@2.6.1 -D` (este comando ir√° instalar o Cypress e outras _libs_ como depend√™ncias de desenvolvimento, al√©m de criar o arquivo `package-lock.json` e o diret√≥rio `node_modules/`, para onde √© feito o _download_ de todas as depend√™ncias).

> A _lib_ [`faker`](https://www.npmjs.com/package/@faker-js/faker) ser√° utilizada para a cria√ß√£o de dados aleat√≥rios para os testes
> 
> E a _lib_ [`cypress-plugin-api`](https://www.npmjs.com/package/cypress-plugin-api) ser√° utilizada para prover feedback visual durante os testes de API.

## Inicializando o Cypress

No terminal de linha de comando, na raiz do projeto, execute o comando `npx cypress open` (este comando ir√° abrir a Cypress App, a qual vai te guiar na cria√ß√£o do projeto de testes _end-to-end_ (_E2E_).

1. Clique no bot√£o para a cria√ß√£o de um projeto de testes _end-to-end_ (_E2E Testing_)
2. Aceite os arquivos de configura√ß√£o clicando no bot√£o _Continue_
3. Selecione o navegador Electron e clique no bot√£o _Start E2E Testing in Electron_
4. Crie um primeiro arquivo de teste clicando na op√ß√£o _Create new emtpy spec_
5. Nomeie o arquivo como `login.cy.js`; clique no bot√£o _Create spec_; e ent√£o, confirme clicando no bot√£o _Ok, run the spec_
6. Ap√≥s a execu√ß√£o do arquivo rec√©m criado, feche o navegador Electron.

### Configurando o projeto de testes automatizados

1. Feche a Cypress App
2. Abra o arquivo `cypress.config.js` criado na raiz do projeto e altere seu conte√∫do pelo seguinte:

```js
const { defineConfig } = require('cypress')

module.exports = defineConfig({
  e2e: {
    baseUrl: 'http://localhost',
  },
  fixturesFolder: false,
  video: false,
})

```

> Aqui estamos configurando a URL base da aplica√ß√£o em teste, al√©m do n√£o uso de _fixtures_ e a n√£o gera√ß√£o gera√ß√£o de v√≠deos ap√≥s a execu√ß√£o dos testes em modo _headless_.

3. Ainda na raiz do projeto, crie um arquivo chamado `cypress.env.json` com os seguintes dados:

```json
{
    "user_name": "root",
    "user_password": "password-do-usuario-root-definido-anteriormente",
    "gitlab_access_token": "access-token-criado-anteriormente"
}

```

4. Dentro da pasta `cypress/`, crie uma sub-pasta chamada `downloads/`.

>Sua estrutura final deve ser `cypress/downloads/`.
>
> Esta pasta ser√° utilizada posteriormente para o teste de clone de projeto.

5. Por fim, delete a pasta `cypress/fixtures/`.

## Documenta√ß√£o oficial do Cypress

Durante o curso, caso voc√™ tenha d√∫vidas sobre qualquer comando do Cypress , recomendo a [documenta√ß√£o oficial](https://docs.cypress.io) como sua primeira fonte de consulta.

___

Pronto! J√° temos tudo que √© necess√°rio para come√ßar a testar o GitLab (a aplica√ß√£o em teste).

V√° para a [aula 2](./2.md) para criarmos um teste para a funcionalidade de _login_.
